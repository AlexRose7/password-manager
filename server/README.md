## Доступные эндпоинты
### /users - работа с пользователями.
#### GET /users/current - получение текущего пользователя.
В случае если пользователь не залогинен возвращает:
```json
{
    "isGuest": true
}
```
Если залогинен, то:
```json
{
    "id": 3,
    "login": "login",
    "isGuest": false
}
```
HTTP Статусы:
* 200 OK - при успешном запросе, вне зависимости, гость ли он
* 404 Not Found - если пользователя с текущей сессией не существует

#### POST /users - создание нового пользователя.
Требует JSON с полями login и password:
```json
{
    "login": "login",
    "password": "123123"
}
```
Возвращает данные о текущем пользователе и устанавливает куки сессии в случае успешной валидации:
```json
{
    "login": "login",
    "id": 1
}
```
Логин и пароль не могут быть пустыми, а также логин должен быть уникален. В случае ошибки валидации сервер вернёт json с принятыми данными в поле form и с ошибками в поле errors:
```json
{
    "form": {
        "login": "login",
        "password": ""
    },
    "errors": {
        "password": "Пароль не может быть пустым",
        "login": "Этот логин уже занят"
    }
}
```
HTTP Статусы:
* 201 Created - при успешном создании пользователя
* 422 Unprocessable Entity - при ошибке валидации

#### PUT /users/current - редактирование текущего пользователя.
Требует аутентификации (активной сессии). Требует JSON с полями, которые нужно поменять (доступные поля login и password):
```json
{
    "login": "NEW LOGIN",
    "password": "NEW PASSWORD"
}
```
Возвращает JSON с новыми данными пользователя, кроме пароля:
```json
{
    "id": 3,
    "login": "NEW LOGIN"
}
```
Логин и пароль не могут быть пустыми, а также логин должен быть уникален. В случае ошибки валидации сервер вернёт json с принятыми данными в поле form и с ошибками в поле errors:
```json
{
    "form": {
        "login": "login",
        "password": ""
    },
    "errors": {
        "password": "Пароль не может быть пустым",
        "login": "Этот логин уже занят"
    }
}
```
HTTP Статусы:
* 200 OK - при успешном обновлении данных
* 401 Unauthorized - если пользователь не аутентифицирован
* 404 Not Found - если пользователя с текущей сессией не существует
* 422 Unprocessable Entity - при ошибке валидации

#### DELETE /users/current - безвозвратное удаление текущего пользователя.
Требует аутентификации (активной сессии).<br>
HTTP Статусы:
* 204 No Content - при успешном удалении
* 401 Unauthorized - если пользователь не аутентифицирован
* 404 Not Found - если пользователя с текущей сессией не существует

### /sessions - работа с сессиями.
#### POST /sessions - логин в аккаунт (создание сессии).
Требует JSON с полями login и password:
```json
{
    "login": "login",
    "password": "123123"
}
```
Возвращает JSON с данными о текущем пользователе:
```json
{
    "id": 3,
    "login": "login"
}
```
В случае неуспешной аутентификации сервер вернёт json с принятыми данными в поле form и с ошибкой в поле error:
```json
{
    "form": {
        "login": "login",
        "password": "123123"
    },
    "error": "Invalid login or password"
}
```
HTTP Статусы:
* 200 OK - при успешной аутентификации
* 422 Unprocessable Entity - при неуспешной аутентификации

#### DELETE /sessions - разлогирование (удаление текущей сессии).
Полностью идемпотентен: удаляет сессию вне зависимости от того, существует ли текущая.<br>
HTTP Статусы:
* 204 No Content - при успешном запросе

### /accounts - работа с аккаунтами пользователя.
Все следующие эндоинты требуют аутентификации (активной сессии).

#### POST /accounts - создание нового аккаунта.
Требует JSON с полями service, login и password, например:
```json
{
    "service": "password manager",
    "login": "logiiiiin",
    "password": "123123"
}
```
Возвращает JSON созданного аккаунта:
```json
{
    "id": 3,
    "service": "password manager",
    "login": "logiiiiin",
    "password": "123123"
}
```
HTTP Статусы:
* 201 Created - при успешном создании
* 401 Unauthorized - если пользователь не аутентифицирован

#### GET /accounts - получить все аккаунты пользователя.
Возвращает массив с аккаунтами:
```json
[
    {
        "id": 2,
        "service": "service 1",
        "login": "logiiiiin",
        "password": "123123"
    },
    {
        "id": 3,
        "service": "service 2",
        "login": "logiiiiin",
        "password": "123123"
    }
]
```
HTTP Статусы:
* 200 OK - при успешном создании
* 401 Unauthorized - если пользователь не аутентифицирован

#### GET /accounts/:id - получить конкретный аккаунт.
Вместо :id подставить id нужного аккаунта. Возвращает объект-аккаунт:
```json
{
    "id": 2,
    "service": "password manager",
    "login": "logiiiiin",
    "password": "123123"
}
```
HTTP Статусы:
* 200 OK - при успешном запросе
* 401 Unauthorized - если пользователь не аутентифицирован
* 404 Not Found - если аккаунт не найден

#### PUT /accounts/:id - изменить аккаунт.
Вместо :id подставить id нужного аккаунта. Требует JSON с полями, которые нужно изменить (доступны для изменения service, login и password). Например, вот такой поменяет и логин, и пароль, "service" трогать не будет:
```json
{
    "login": "NEW LOGIN",
    "password": "NEW PASSWORD"
}
```
Ещё пример. Можно отправить запрос с таким телом, чтобы поменять только логин:
```json
{
    "login": "NEW LOGIN"
}
```
HTTP Статусы:
* 200 OK - при успешном изменении
* 401 Unauthorized - если пользователь не аутентифицирован
* 404 Not Found - если аккаунт не найден

#### DELETE /accounts/:id - удалить аккаунт.
Вместо :id подставить id нужного аккаунта.<br>
HTTP Статусы:
* 204 No Content - при успешном удалении
* 401 Unauthorized - если пользователь не аутентифицирован
* 404 Not Found - если аккаунт не найден

## Примечания
* Все запросы должны начинаться с /api/